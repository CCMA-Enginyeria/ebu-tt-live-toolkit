Feature: Computed element active begin and end times
  # Assuming that parent end = min(explicit end, begin+dur) where dur may exist, i.e. for body element.


  # Given a parent element with one child element, the computed active parent and child begin and active parent end times are valid:
  Examples:
  | xml_file           |
  | time_semantics.xml |

  Scenario: Parent with one child element
    Given an xml file <xml_file>
    When it has body begin time <body_begin>
    And it has body end time <body_end>
    And it has div begin time <div_begin>
    And it has div end time <div_end>
    Then body active begin time is <body_active_begin>
    And body active end time is <body_active_end>
    And div active begin time is <div_active_begin>
    And div active end time is <div_active_end>

    Examples:
    | body_begin | body_end | div_begin | div_end  | body_active_begin | body_active_end | div_active_begin | div_active_end |
    |            |          |           |          | 00:00:00          | undefined       | 00:00:00         | undefined      |
    | 00:01:00   |          |           |          | 00:01:00          | undefined       | 00:01:00         | undefined      |
    |            | 00:01:30 |           |          | 00:00:00          | 00:01:30        | 00:00:00         | 00:01:30       |
    | 00:01:00   | 00:01:30 |           |          | 00:01:00          | 00:01:30        | 00:01:00         | 00:01:30       |
    |            |          | 00:01:08  |          | 00:00:00          | undefined       | 00:01:08         | undefined      |
    | 00:01:00   |          | 00:00:08  |          | 00:01:00          | undefined       | 00:01:08         | undefined      |
    |            | 00:01:30 | 00:01:08  |          | 00:00:00          | 00:01:30        | 00:01:08         | 00:01:30       |
    | 00:01:00   | 00:01:30 | 00:00:08  |          | 00:01:00          | 00:01:30        | 00:01:08         | 00:01:30       |
    |            |          | 00:01:08  | 00:01:20 | 00:00:00          | 00:01:20        | 00:01:08         | 00:01:20       |
    | 00:01:00   |          | 00:00:08  | 00:00:20 | 00:01:00          | 00:01:20        | 00:01:08         | 00:01:20       |
    |            | 00:01:30 | 00:01:08  | 00:01:20 | 00:00:00          | 00:01:30        | 00:01:08         | 00:01:20       |
    | 00:01:00   | 00:01:30 | 00:00:08  | 00:00:20 | 00:01:00          | 00:01:30        | 00:01:08         | 00:01:20       |
    |            |          |           | 00:01:20 | 00:00:00          | 00:01:20        | 00:00:00         | 00:01:20       |
    | 00:01:00   |          |           | 00:00:20 | 00:01:00          | 00:01:20        | 00:01:00         | 00:01:20       |
    |            | 00:01:30 |           | 00:01:20 | 00:00:00          | 00:01:30        | 00:01:00         | 00:01:20       |
    | 00:01:00   | 00:01:30 |           | 00:00:20 | 00:01:00          | 00:01:30        | 00:01:00         | 00:01:20       |


  # Given a parent element with two child elements, the computed active parent and child begin and active parent end times are valid:
  Scenario: Parent with two child elements
    Given an xml file <xml_file>
    When it has p begin time <p_begin>
    And it has p end time <p_end>
    And it has span1 begin time <span1_begin>
    And it has span1 end time <span1_end>
    And it has span2 begin time <span2_begin>
    And it has span2 end time <span2_end>
    Then p active begin time is <p_active_begin>
    And p active end time is <p_active_end>
    And span1 active begin time is <span1_active_begin>
    And span1 active end time is <span1_active_end>
    And span2 active begin time is <span2_active_begin>
    And span2 active end time is <span2_active_end>

    Examples:
    | p_begin  | p_end    | span1_begin | span1_end | span2_begin | span2_end | p_active_begin | p_active_end | span1_active_begin | span1_active_end | span2_active_begin | span2_active_end
    |          |          |             |           |             |           | 00:00:00       | undefined    | 00:00:00           | undefined        | 00:00:00           | undefined
    | 00:01:00 |          |             |           |             |           | 00:01:00       | undefined    | 00:01:00           | undefined        | 00:01:00           | undefined
    |          | 00:01:30 |             |           |             |           | 00:00:00       | 00:01:30     | 00:00:00           | 00:01:30         | 00:00:00           | 00:01:30
    | 00:01:00 | 00:01:30 |             |           |             |           | 00:01:00       | 00:01:30     | 00:01:00           | 00:01:30         | 00:01:00           | 00:01:30
    |          |          | 00:01:08    |           |             |           | 00:00:00       | undefined    | 00:01:08           | undefined        | 00:00:00           | undefined
    | 00:01:00 |          | 00:00:08    |           |             |           | 00:01:00       | undefined    | 00:01:08           | undefined        | 00:01:00           | undefined
    |          | 00:01:30 | 00:01:08    |           |             |           | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:30         | 00:00:00           | 00:01:30
    | 00:01:00 | 00:01:30 | 00:00:08    |           |             |           | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:30         | 00:01:00           | 00:01:30
    |          |          | 00:01:08    |  00:01:20 |             |           | 00:00:00       | undefined    | 00:01:08           | 00:01:20         | 00:00:00           | undefined
    | 00:01:00 |          | 00:00:08    |  00:00:20 |             |           | 00:01:00       | undefined    | 00:01:08           | 00:01:20         | 00:01:00           | undefined
    |          | 00:01:30 | 00:01:08    |  00:01:20 |             |           | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:00:00           | 00:01:30
    | 00:01:00 | 00:01:30 | 00:00:08    |  00:00:20 |             |           | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:00           | 00:01:30
    |          |          |             |  00:01:20 |             |           | 00:00:00       | undefined    | 00:01:08           | 00:01:20         | 00:00:00           | undefined
    | 00:01:00 |          |             |  00:00:20 |             |           | 00:01:00       | undefined    | 00:01:08           | 00:01:20         | 00:01:00           | undefined
    |          | 00:01:30 |             |  00:01:20 |             |           | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:00:00           | 00:01:30
    | 00:01:00 | 00:01:30 |             |  00:00:20 |             |           | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:00           | 00:01:30
    |          |          |             |           | 00:01:15    |           | 00:00:00       | undefined    | 00:00:00           | undefined        | 00:01:15           | undefined
    | 00:01:00 |          |             |           | 00:00:15    |           | 00:01:00       | undefined    | 00:01:00           | undefined        | 00:01:15           | undefined
    |          | 00:01:30 |             |           | 00:01:15    |           | 00:00:00       | 00:01:30     | 00:00:00           | 00:01:30         | 00:01:15           | 00:01:30
    | 00:01:00 | 00:01:30 |             |           | 00:00:15    |           | 00:01:00       | 00:01:30     | 00:01:00           | 00:01:30         | 00:01:15           | 00:01:30
    |          |          | 00:01:08    |           | 00:01:15    |           | 00:00:00       | undefined    | 00:01:08           | undefined        | 00:01:15           | undefined
    | 00:01:00 |          | 00:00:08    |           | 00:00:15    |           | 00:01:00       | undefined    | 00:01:08           | undefined        | 00:01:15           | undefined
    |          | 00:01:30 | 00:01:08    |           | 00:01:15    |           | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:30         | 00:01:15           | 00:01:30
    | 00:01:00 | 00:01:30 | 00:00:08    |           | 00:00:15    |           | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:30         | 00:01:15           | 00:01:30
    |          |          | 00:01:08    |  00:01:20 | 00:01:15    |           | 00:00:00       | undefined    | 00:01:08           | 00:01:20         | 00:01:15           | undefined
    | 00:01:00 |          | 00:00:08    |  00:00:20 | 00:00:15    |           | 00:01:00       | undefined    | 00:01:08           | 00:01:20         | 00:01:15           | undefined
    |          | 00:01:30 | 00:01:08    |  00:01:20 | 00:01:15    |           | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:30
    | 00:01:00 | 00:01:30 | 00:00:08    |  00:00:20 | 00:00:15    |           | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:30
    |          |          |             |  00:01:20 | 00:01:15    |           | 00:00:00       | undefined    | 00:01:08           | 00:01:20         | 00:01:15           | undefined
    | 00:01:00 |          |             |  00:00:20 | 00:00:15    |           | 00:01:00       | undefined    | 00:01:08           | 00:01:20         | 00:01:15           | undefined
    |          | 00:01:30 |             |  00:01:20 | 00:01:15    |           | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:30
    | 00:01:00 | 00:01:30 |             |  00:00:20 | 00:00:15    |           | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:30
    |          |          |             |           |             | 00:01:35  | 00:00:00       | undefined    | 00:00:00           | undefined        | 00:00:00           | 00:01:35
    | 00:01:00 |          |             |           |             | 00:00:35  | 00:01:00       | undefined    | 00:01:00           | undefined        | 00:01:00           | 00:01:35
    |          | 00:01:30 |             |           |             | 00:01:35  | 00:00:00       | 00:01:30     | 00:00:00           | 00:01:30         | 00:00:00           | 00:01:30
    | 00:01:00 | 00:01:30 |             |           |             | 00:00:35  | 00:01:00       | 00:01:30     | 00:01:00           | 00:01:30         | 00:01:00           | 00:01:30
    |          |          | 00:01:08    |           |             | 00:01:35  | 00:00:00       | undefined    | 00:01:08           | undefined        | 00:00:00           | 00:01:35
    | 00:01:00 |          | 00:00:08    |           |             | 00:00:35  | 00:01:00       | undefined    | 00:01:08           | undefined        | 00:01:00           | 00:01:35
    |          | 00:01:30 | 00:01:08    |           |             | 00:01:35  | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:30         | 00:00:00           | 00:01:30
    | 00:01:00 | 00:01:30 | 00:00:08    |           |             | 00:00:35  | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:30         | 00:01:00           | 00:01:30
    |          |          | 00:01:08    |  00:01:20 |             | 00:01:35  | 00:00:00       | 00:01:35     | 00:01:08           | 00:01:20         | 00:00:00           | 00:01:35
    | 00:01:00 |          | 00:00:08    |  00:00:20 |             | 00:00:35  | 00:01:00       | 00:01:35     | 00:01:08           | 00:01:20         | 00:01:00           | 00:01:35
    |          | 00:01:30 | 00:01:08    |  00:01:20 |             | 00:01:35  | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:00:00           | 00:01:30
    | 00:01:00 | 00:01:30 | 00:00:08    |  00:00:20 |             | 00:00:35  | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:00           | 00:01:30
    |          |          |             |  00:01:20 |             | 00:01:35  | 00:00:00       | 00:01:35     | 00:01:08           | 00:01:20         | 00:00:00           | 00:01:35
    | 00:01:00 |          |             |  00:00:20 |             | 00:00:35  | 00:01:00       | 00:01:35     | 00:01:08           | 00:01:20         | 00:01:00           | 00:01:35
    |          | 00:01:30 |             |  00:01:20 |             | 00:01:35  | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:00:00           | 00:01:30
    | 00:01:00 | 00:01:30 |             |  00:00:20 |             | 00:00:35  | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:00           | 00:01:30
    |          |          |             |           | 00:01:15    | 00:01:35  | 00:00:00       | undefined    | 00:00:00           | undefined        | 00:01:15           | 00:01:35
    | 00:01:00 |          |             |           | 00:00:15    | 00:00:35  | 00:01:00       | undefined    | 00:01:00           | undefined        | 00:01:15           | 00:01:35
    |          | 00:01:30 |             |           | 00:01:15    | 00:01:35  | 00:00:00       | 00:01:30     | 00:00:00           | 00:01:30         | 00:01:15           | 00:01:30
    | 00:01:00 | 00:01:30 |             |           | 00:00:15    | 00:00:35  | 00:01:00       | 00:01:30     | 00:01:00           | 00:01:30         | 00:01:15           | 00:01:30
    |          |          | 00:01:08    |           | 00:01:15    | 00:01:35  | 00:00:00       | undefined    | 00:01:08           | undefined        | 00:01:15           | 00:01:35
    | 00:01:00 |          | 00:00:08    |           | 00:00:15    | 00:00:35  | 00:01:00       | undefined    | 00:01:08           | undefined        | 00:01:15           | 00:01:35
    |          | 00:01:30 | 00:01:08    |           | 00:01:15    | 00:01:35  | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:30         | 00:01:15           | 00:01:30
    | 00:01:00 | 00:01:30 | 00:00:08    |           | 00:00:15    | 00:00:35  | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:30         | 00:01:15           | 00:01:30
    |          |          | 00:01:08    |  00:01:20 | 00:01:15    | 00:01:35  | 00:00:00       | 00:01:35     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:35
    | 00:01:00 |          | 00:00:08    |  00:00:20 | 00:00:15    | 00:00:35  | 00:01:00       | 00:01:35     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:35
    |          | 00:01:30 | 00:01:08    |  00:01:20 | 00:01:15    | 00:01:35  | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:30
    | 00:01:00 | 00:01:30 | 00:00:08    |  00:00:20 | 00:00:15    | 00:00:35  | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:30
    |          |          |             |  00:01:20 | 00:01:15    | 00:01:35  | 00:00:00       | undefined    | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:35
    | 00:01:00 |          |             |  00:00:20 | 00:00:15    | 00:00:35  | 00:01:00       | undefined    | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:35
    |          | 00:01:30 |             |  00:01:20 | 00:01:15    | 00:01:35  | 00:00:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:30
    | 00:01:00 | 00:01:30 |             |  00:00:20 | 00:00:15    | 00:00:35  | 00:01:00       | 00:01:30     | 00:01:08           | 00:01:20         | 00:01:15           | 00:01:30
